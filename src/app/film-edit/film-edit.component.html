<form (ngSubmit)="save()" [formGroup]="filmModel">
    <mat-card class="example-card" appearance="outlined">
      <mat-card-header>
        <mat-card-title>{{titleS()}}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
  
        <mat-form-field>
          <mat-label>Film title</mat-label>
          <input matInput formControlName="nazov">
          <mat-error>
            @if(nazov.errors) {
              @if(nazov.errors['required']) {
                Film title is required
              } @else {
                {{printErrors(nazov.errors)}}
              }
            }
          </mat-error>
        </mat-form-field>
  
        <mat-form-field>
          <mat-label>Slovak title</mat-label>
          <input matInput formControlName="slovenskyNazov">
          <mat-error>
            @if(slovenskyNazov.errors) {
              {{printErrors(slovenskyNazov.errors)}}
            }
          </mat-error>
        </mat-form-field>
  
        <mat-form-field>
          <mat-label>Release year</mat-label>
          <input matInput type="number" formControlName="rok">
          <mat-error>
            @if(rok.errors) {
              @if(rok.errors['required']) {
                Year is required
              } @else if (rok.errors['min'] || rok.errors['max']) {
                Year is out of valid range
              } @else {
                {{printErrors(rok.errors)}}
              }
            }
          </mat-error>
        </mat-form-field>
  
        <mat-form-field>
          <mat-label>IMDB ID</mat-label>
          <input matInput formControlName="imdbID">
          <mat-error>
            @if(imdbID.errors) {
              {{printErrors(imdbID.errors)}}
            }
          </mat-error>
        </mat-form-field>
  
        <p>Directors:</p>
          <div formArrayName="reziser">
            @for(director of reziser.controls; track i; let i = $index) {
              <div [formGroupName]="i" style="display: flex; gap: 10px; align-items: center;">
                <mat-form-field>
                  <mat-label>Krstné meno</mat-label>
                  <input matInput formControlName="krstneMeno">
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Stredné meno</mat-label>
                  <input matInput formControlName="stredneMeno">
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Priezvisko</mat-label>
                  <input matInput formControlName="priezvisko">
                </mat-form-field>
                <button mat-icon-button type="button" (click)="removeDirector(i)">
                  <mat-icon>remove_circle</mat-icon>
                </button>
              </div>
            }
          </div>
          <button mat-button type="button" (click)="addDirector()">Add Director</button>


  
        <p>Characters:</p>
        <div formArrayName="postava">
          @for(character of postava.controls; track i; let i = $index) {
            <div [formGroupName]="i">
              <mat-form-field>
                <mat-label>Character name</mat-label>
                <input matInput formControlName="name">
              </mat-form-field>
              <div style="display: flex; gap: 10px;">
                <mat-form-field>
                  <mat-label>Actor - Krstné meno</mat-label>
                  <input matInput formControlName="actorKrstneMeno">
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Actor - Stredné meno</mat-label>
                  <input matInput formControlName="actorStredneMeno">
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Actor - Priezvisko</mat-label>
                  <input matInput formControlName="actorPriezvisko">
                </mat-form-field>
              </div>
              <mat-form-field>
                <mat-label>Typ postavy</mat-label>
                <mat-select formControlName="typPostavy">
                  <mat-option value="hlavná postava">hlavná postava</mat-option>
                  <mat-option value="vedľajšia postava">vedľajšia postava</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <button mat-icon-button type="button" (click)="removeCharacter(i)">
              <mat-icon>remove_circle</mat-icon>
            </button>
          }
        </div>
        <button mat-button type="button" (click)="addCharacter()">
          <mat-icon>add</mat-icon> Add Character
        </button>

  
        <p>Ranking positions:</p>
        <div formGroupName="poradieVRebricku">
          @for(name of poradieKeys; track name) {
            <mat-form-field>
              <mat-label>{{name}}</mat-label>
              <input matInput type="number" [formControlName]="name">
            </mat-form-field>
          }
        </div>
      </mat-card-content>
      <mat-card-actions>
        <button type="submit" mat-button [disabled]="filmModel.invalid">Save film</button>
      </mat-card-actions>
    </mat-card>
  </form>
  